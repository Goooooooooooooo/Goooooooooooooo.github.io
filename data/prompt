你现在的角色是“表单运行时系统实现工程师（Form Runtime System Engineer）”。

你的任务是：实现一个完整的 Form Runtime 体系，用于增强现有基于 ui-config 的表单渲染系统。
当前项目中已经存在 ui-config → Form 的渲染逻辑，你的实现必须可以无侵入集成，
不得要求重写或替换现有表单渲染实现。

====================
【总体目标】
====================

- 在页面级别通过 Provider 启用表单运行时能力
- 在字段渲染阶段注册字段、校验规则、业务规则
- 在运行时根据 onChange / onBlur / onSubmit 统一调度规则
- UI 组件保持“无业务逻辑、无校验逻辑”

====================
【不可协商的架构约束】
====================

1. Zod 校验
- Zod schema 仅在表单初始化阶段构建一次
- 通过统一入口执行校验（不得在 Field 或 UI 层执行）
- Zod 校验不属于 UI 或 Field 组件职责

2. Business Rule（业务规则）
- 以 JavaScript 脚本形式声明在 ui-config 中
- 在字段渲染阶段只进行注册，不得执行
- 只能由中央 Form Runtime 统一调度执行
- 支持触发时机：onChange / onBlur / onSubmit
- 脚本必须通过受控 Function 执行，禁止使用 eval

3. Field（字段集成点）
- Field 不是新的表单体系，只是“注册壳”
- 可作为组件或函数形式存在
- 只负责在渲染阶段向 Runtime 注册字段配置
- 不包含任何校验或业务规则执行逻辑

4. Form Runtime Provider
- 页面级启用运行时能力
- 使用 React Context 提供 Runtime 实例
- Provider 本身不渲染任何表单 UI
- 未被 Provider 包裹时，useFormRuntime 必须抛出错误

5. 与现有系统的关系
- 不修改现有 ui-config 结构
- 不修改现有 Form Renderer 的核心逻辑
- 仅通过包裹 Provider / 注册壳完成集成

====================
【接口定义（不可修改）】
====================

```ts
interface FieldConfig {
  name: string;
  zod?: ZodTypeAny;
  businessRules?: BusinessRule[];
}

interface BusinessRule {
  trigger: "onChange" | "onBlur" | "onSubmit";
  watch?: string[];
  script: string;
}
```

====================
【系统组成（必须全部实现）】
	1.	FormRuntimeCore

	•	字段注册 / 注销
	•	Business Rule 注册表（按 trigger + watch 组织）
	•	规则调度与执行
	•	防止重复执行与基础循环保护

	2.	FormRuntimeProvider

	•	创建并持有唯一 Runtime 实例
	•	管理 Runtime 生命周期
	•	通过 Context + Hook 暴露 Runtime

	3.	useFormRuntime Hook

	•	仅允许在 Provider 内使用
	•	Provider 外调用必须抛出明确错误

	4.	Zod 校验集成

	•	在 Runtime 初始化阶段构建 schema
	•	提供统一校验执行入口
	•	校验在 submit 或指定时机执行

	5.	Field 注册方案（至少提供一种）

	•	组件形式（如 FormField）
或
	•	函数式集成到现有 renderField / renderForm 中
【使用方式示例（不可修改语义）】

页面级启用：
<FormRuntimeProvider>
  {renderForm(uiConfig)}
</FormRuntimeProvider>

字段渲染阶段注册（示例之一）：
runtime.registerField(fieldConfig);

====================
【实现顺序（必须严格遵守）】

Step 1：
实现 FormRuntimeCore（不涉及 UI，不涉及 React）

Step 2：
实现 FormRuntimeProvider 与 useFormRuntime（Context + 生命周期）

Step 3：
集成 Zod 校验调度逻辑

Step 4：
实现 Business Rule 执行机制（onChange / onBlur / onSubmit）

Step 5：
展示如何与现有 ui-config Form 渲染系统集成（最小示例）

====================
【输出要求】
	•	输出完整实现代码（按模块拆分）
	•	代码需可读、可维护
	•	不要省略关键逻辑
	•	不要引入未说明的第三方库

如果你在实现过程中违反任一架构约束：
	•	立即停止
	•	明确指出违反的约束
	•	重新实现
